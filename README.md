# Venidera's RedisDB Time Series Database - vRedisTSDB

A microservice with the business capability to store and retrieve time series data points.

The data is stored on RedisDB using the module *redistimeseries*.

# Specifications

### What it does

* Store data points from time series for a *key*
* Return data points from a time series identified by a *key*
* Allow retrieve data by intervals defined by *start* and *end*
* Allow retrieve timestamps as date time strings
* Allow aggregation *(avg, sum, min, max, range, count, first, last)* considering a time granularity value in secondess *(bucketSizeSeconds - time bucket for aggregation in seconds)*. Defaults: *avg* for *day* (86400 s)

### What it doesn't

* Remove points, only entire timeseries (RedisDB: *del <key>*)
* Store metadata

### What it will do:

* Store negative timestamps by using an inverted structure with a key that will identify each part of the time series (before and after epoch).
* Store min and max timestamps for a tskey (time series key)

### RESTful API

* Endpoints (Resources): '/tsdb
* Verbs: POST (submit data), GET (retrieve data) and DELETE (remove time series)
* Schema: ...
* Query arguments:
    * start: ...
    * end: ...
    * tstype: ...
    * ...

### Implementation:

* Python (>= 3.7): initial version implemented

### Example of calls:

* Read points:

```
curl -X GET 'http://192.168.1.100:18080/tsdb/ts81_0_0?tstype=datetime'
```

* Add points:

```
curl -X POST \
  http://192.168.1.100:18080/tsdb/ts81_0_0 \
  -H 'Content-Type: application/json' \
  -H 'Postman-Token: a0439c5c-3a17-4fbd-acdd-2728b897e6bd' \
  -H 'cache-control: no-cache' \
  -d '{"values": [
3230,
3230,
3230,
3230,
4319,
4319,
4319,
4319,
4319,
4319,
4319,
4319,
4319,
5736,
5736,
5736,
5736,
5736,
5781,
6164,
6164,
6164,
6164,
6164,
6957,
6164,
6164,
6164,
6314,
6314,
6314,
6314,
6314,
6314,
6314,
6314,
6314,
6314,
6314,
6311,
6311,
6311,
6311,
6311,
6311,
6436,
6436,
6436,
6436,
6571,
6571,
6571,
6571,
6571,
6720,
6720,
6720,
6720,
6720,
6720,
6720,
6720,
6720,
6720,
6720,
6775,
6775,
6775,
6775,
6835,
6835,
6957,
6957,
6957,
6957,
6957,
6957,
6957,
6957,
6957,
6750,
6750,
6750,
6750,
6750,
6750,
6750,
6750,
6750,
6750,
6750,
6812,
6812,
6812,
6812,
6812,
6812,
6812,
6879,
6879,
6879,
6879,
6879,
6879,
6879,
6879,
6949,
6949,
7032,
7032,
7032,
7032,
7032,
7032,
7107,
7107,
7107,
7107,
7107,
7107,
7107,
7107,
7107,
7107,
7107,
7180,
7180,
7180,
7180,
7180,
7180,
7180,
7272,
7272,
7272,
7272,
7452,
7452,
7452,
7452,
7452,
7452,
7452,
7452,
7558,
7558,
7558,
7558
],
"timestamps": [
"2015-10-15 00:00:00",
"2015-10-16 00:00:00",
"2015-11-01 00:00:00",
"2015-12-01 00:00:00",
"2016-01-01 00:00:00",
"2016-02-01 00:00:00",
"2016-02-29 00:00:00",
"2016-03-01 00:00:00",
"2016-04-01 00:00:00",
"2016-05-01 00:00:00",
"2016-06-01 00:00:00",
"2016-07-01 00:00:00",
"2016-07-02 00:00:00",
"2016-08-01 00:00:00",
"2016-09-01 00:00:00",
"2016-10-01 00:00:00",
"2016-11-01 00:00:00",
"2016-12-01 00:00:00",
"2017-01-01 00:00:00",
"2017-02-01 00:00:00",
"2017-03-01 00:00:00",
"2017-04-01 00:00:00",
"2017-05-01 00:00:00",
"2017-06-01 00:00:00",
"2017-07-01 00:00:00",
"2017-07-07 00:00:00",
"2017-07-08 00:00:00",
"2017-07-11 00:00:00",
"2017-07-12 00:00:00",
"2017-07-13 00:00:00",
"2017-07-14 00:00:00",
"2017-07-15 00:00:00",
"2017-07-19 00:00:00",
"2017-07-23 00:00:00",
"2017-07-26 00:00:00",
"2017-08-01 00:00:00",
"2017-08-05 00:00:00",
"2017-08-08 00:00:00",
"2017-08-09 00:00:00",
"2017-08-10 00:00:00",
"2017-08-11 00:00:00",
"2017-08-15 00:00:00",
"2017-08-16 00:00:00",
"2017-08-17 00:00:00",
"2017-09-01 00:00:00",
"2017-09-14 00:00:00",
"2017-09-15 00:00:00",
"2017-09-16 00:00:00",
"2017-10-06 00:00:00",
"2017-10-12 00:00:00",
"2017-10-13 00:00:00",
"2017-10-14 00:00:00",
"2017-11-07 00:00:00",
"2017-11-08 00:00:00",
"2017-11-11 00:00:00",
"2017-11-14 00:00:00",
"2017-11-15 00:00:00",
"2017-11-16 00:00:00",
"2017-11-17 00:00:00",
"2017-11-18 00:00:00",
"2017-11-19 00:00:00",
"2017-11-20 00:00:00",
"2017-11-21 00:00:00",
"2017-11-22 00:00:00",
"2017-11-28 00:00:00",
"2017-12-14 00:00:00",
"2017-12-21 22:00:00",
"2017-12-22 22:00:00",
"2017-12-27 22:00:00",
"2018-02-06 00:00:00",
"2018-02-07 00:00:00",
"2018-02-09 00:00:00",
"2018-02-10 00:00:00",
"2018-02-16 00:00:00",
"2018-02-17 00:00:00",
"2018-02-18 00:00:00",
"2018-02-27 00:00:00",
"2018-03-01 00:00:00",
"2018-03-07 00:00:00",
"2018-03-13 00:00:00",
"2018-03-14 00:00:00",
"2018-03-26 00:00:00",
"2018-03-27 00:00:00",
"2018-03-28 00:00:00",
"2018-03-29 00:00:00",
"2018-03-30 00:00:00",
"2018-03-31 00:00:00",
"2018-04-01 00:00:00",
"2018-04-02 00:00:00",
"2018-04-03 00:00:00",
"2018-04-06 00:00:00",
"2018-04-11 00:00:00",
"2018-04-13 00:00:00",
"2018-04-14 00:00:00",
"2018-04-20 00:00:00",
"2018-04-21 00:00:00",
"2018-05-03 00:00:00",
"2018-05-08 00:00:00",
"2018-05-11 00:00:00",
"2018-05-12 00:00:00",
"2018-05-16 00:00:00",
"2018-06-07 00:00:00",
"2018-06-08 00:00:00",
"2018-06-09 00:00:00",
"2018-06-10 00:00:00",
"2018-06-11 00:00:00",
"2018-06-12 00:00:00",
"2018-07-10 00:00:00",
"2018-07-12 00:00:00",
"2018-07-18 00:00:00",
"2018-07-31 00:00:00",
"2018-08-01 00:00:00",
"2018-08-02 00:00:00",
"2018-08-03 00:00:00",
"2018-08-11 00:00:00",
"2018-08-14 00:00:00",
"2018-08-16 00:00:00",
"2018-08-17 00:00:00",
"2018-08-18 00:00:00",
"2018-08-19 00:00:00",
"2018-08-20 00:00:00",
"2018-08-21 00:00:00",
"2018-08-30 00:00:00",
"2018-09-04 00:00:00",
"2018-09-07 00:00:00",
"2018-09-11 00:00:00",
"2018-09-14 00:00:00",
"2018-09-18 00:00:00",
"2018-09-19 00:00:00",
"2018-09-26 00:00:00",
"2018-09-27 00:00:00",
"2018-10-11 00:00:00",
"2018-10-12 00:00:00",
"2018-10-17 00:00:00",
"2018-10-18 00:00:00",
"2018-11-06 00:00:00",
"2018-12-23 00:00:00",
"2018-12-26 00:00:00",
"2018-12-31 00:00:00",
"2019-01-01 00:00:00",
"2019-01-02 00:00:00",
"2019-01-03 00:00:00",
"2019-01-09 00:00:00",
"2019-01-10 00:00:00",
"2019-01-13 00:00:00",
"2019-01-14 00:00:00",
"2019-01-29 00:00:00",
"2019-01-31 00:00:00"
]}'
```

## References

https://oss.redislabs.com/redistimeseries
https://oss.redislabs.com/redistimeseries/commands/
https://pt.slideshare.net/RedisLabs/redisconf18-redis-as-a-timeseries-db?cf_lbyyhhwhyjj5l3rs65cb3w=ey0o1s0f9ovz3l8qdt31a
https://github.com/RedisLabsModules/RedisTimeSeries
